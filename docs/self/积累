1、cancel和stop
stop是优雅的停止，但必须实现stoppableFunction接口，调用stop方法，停止产生数据，处理完数据后优雅的停止
cancel是调用cancel()方法，尽快取消任务，没有取消的，开始定期关闭线程，可以保存savepoint，一种在配置中指定savepoint目录，一种每次调用指定
2、流式数据倾斜
通过查看各subtask的数据流入流出量，很容易看出数据是否有倾斜
3、flink sql的自定义aggregate函数，在window中没有调用函数的open方法
select DateUtil(rowtime,'yyyyMMddHH'),WeightedAvg(number,number) from source group by DateUtil(rowtime,'yyyyMMddHH') //正常
select fruit,WeightedAvg(number,number),TUMBLE_END(rowtime, INTERVAL '5' SECOND) from source group by fruit,TUMBLE(rowtime, INTERVAL '5' SECOND) //没有调用AggregateFunction的open方法
如果在自定义aggregate函数中open中连接外部数据或者context获取参数，受影响，解决是在构造器传入
https://mp.weixin.qq.com/s/GRt_nnahIh7wmQvTMYIMfg
4、流式计算需要满足的几点：状态机制，精确一次语义，吞吐量大，容错机制，弹性扩展
5、调优（参考）：https://www.cnblogs.com/029zz010buct/p/9774295.html
6、内存管理：
   开启堆外内存taskmanager.memory.off-heap=true；不降大量对象放在堆上，放到堆外预留的内存；内存空间不够了，序列话到磁盘
   flink自己的序列化方式，typeInformation为所有类型的基类
7、Asynchronous Barrier Snapshotting(ABS)
  异步屏障快照是轻量级快照，核心思想是通过barrier来标记出发快照的时间点和对应数据，将快照时间和数据流解耦异步操作，对管道数据没有依赖
8.checkpoints优化的几个参数
    1、建议设置的 Checkpoint 的间隔时间最好大于 Checkpoint 的时间，2、Checkpoint保存数默认是1，也就是只保存最新的 Checkpoint 的状态文件，设为2， 3状态很大时可以开启本地恢复state.backend.local-recovery 值为 true
9、

